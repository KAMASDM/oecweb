"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[21],{5021:function(e,a,t){t.d(a,{Z:function(){return k}});var s=t(4165),n=t(5861),r=t(9439),i=t(4942),l=t(1413),d=t(2791),o=t(3360),u=(t(6276),t(4707)),p=t(9825),c=t(182),h=t(9434),m=t(8982),v=t(7689),g=t(3247),f=(t(8789),t(184));var _=function(e){var a,t=(0,d.useState)(!0),i=(0,r.Z)(t,2),o=i[0],v=i[1],g=(0,d.useState)([]),_=(0,r.Z)(g,2),x=_[0],b=_[1],k=(0,h.v9)((function(e){return e.authStore})),I=(0,d.useState)(null),j=(0,r.Z)(I,2),M=j[0],Z=j[1];(0,d.useEffect)((function(){if(M)throw M}),[M]);var y=function(){var a=(0,n.Z)((0,s.Z)().mark((function a(){var t;return(0,s.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.IE)("enquiries/".concat(e.enqId,"/"),{Authorization:"Bearer ".concat(k.accessToken)},"POST",null);case 2:if(null===(t=a.sent)||void 0===t||!t.isNetwork){a.next=6;break}return Z((0,l.Z)((0,l.Z)({},t),{},{page:"enqForm"})),a.abrupt("return");case 6:if(401!==(null===t||void 0===t?void 0:t.status)&&204!==(null===t||void 0===t?void 0:t.status)&&404!==(null===t||void 0===t?void 0:t.status)){a.next=9;break}return Z((0,l.Z)((0,l.Z)({},t),{},{page:"enqForm"})),a.abrupt("return");case 9:if(null===t||void 0===t||!t.status){a.next=12;break}return Z((0,l.Z)((0,l.Z)({},t),{},{page:"enquiries"})),a.abrupt("return");case 12:b(t),v(!1);case 14:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return(0,d.useEffect)((function(){e.enqId&&(v(!0),y())}),[e.enqId]),o?(0,f.jsx)(m.Z,{className:"text-center"}):(0,f.jsxs)("div",{className:"applicantDetailsApp",children:[(0,f.jsx)("h2",{className:"mb-3 text-center",children:"Applicant Details"}),(0,f.jsx)("span",{children:"Name"})," : ",(0,f.jsx)("span",{children:x.student_name}),(0,f.jsx)("span",{children:"Phone"})," : ",(0,f.jsx)("span",{children:x.student_phone}),(0,f.jsx)("span",{children:"Email Id"})," : ",(0,f.jsx)("span",{children:x.student_email}),(0,f.jsx)("span",{children:"Address"})," :",(0,f.jsxs)("span",{children:[x.student_address,", ",x.city,", ",x.state,", ",x.zipcode," -",x.country]}),(0,f.jsx)("span",{children:"Current Education"})," :",(0,f.jsx)("span",{children:null===(a=x.current_education)||void 0===a?void 0:a.current_education})," ",(0,f.jsx)("span",{children:"Previous Visa Refusal"})," :",(0,f.jsx)("span",{children:x.visa_refusal?"YES":"NO"}),(0,f.jsx)("span",{children:"Visa Refusal File"})," :",(0,f.jsx)("span",{children:x.visa_file?(0,f.jsx)("a",{href:x.visa_file,target:"_blank",rel:"noreferrer",children:"Download File"}):"-"}),(0,f.jsx)("span",{children:"DOB"})," :"," ",(0,f.jsx)("span",{children:null!==x&&void 0!==x&&x.dob?null===x||void 0===x?void 0:x.dob.split("-").reverse().join("-"):"-"}),(0,f.jsx)("span",{children:"Passport Number"})," : ",(0,f.jsx)("span",{children:x.passport_number}),(0,f.jsx)("span",{children:"Is Married"})," : ",(0,f.jsx)("span",{children:x.married?"Yes":"No"}),(0,f.jsx)("span",{children:"Enquiry Date"})," :",(0,f.jsx)("span",{children:x.date_created.split("-").reverse().join("-")}),(0,f.jsx)("span",{children:"University Interested"})," :",(0,f.jsx)(p.Z,{groupClass:"mb-3 col-md-12 selectbox",groupId:"uniInterested",value:e.university_interested,onChange:function(a){e.dispatchFunction({type:"university_interested",value:a})},name:"uniInterested",url:"universitieslists/?country=".concat(x.country_interested.id),isSearch:!0,objKey:"univ_name"}),(0,f.jsx)("span",{children:"Intake Interested"})," :",(0,f.jsx)(p.Z,{groupClass:"mb-3 col-md-12 selectbox",groupId:"intakeInterested",value:e.intake_interested,onChange:function(a){e.dispatchFunction({type:"intake_interested",value:a})},name:"intakeInterested",url:"intakes/",isSearch:!0,objKey:"it's different"}),(0,f.jsx)("span",{children:"Level Applying For"})," :",(0,f.jsx)(p.Z,{groupClass:"mb-3 col-md-12 selectbox",groupId:"levelApplying",value:e.level_applying_for,onChange:function(a){e.dispatchFunction({type:"level_applying_for",value:a})},name:"levelApplying",url:"courselevels/",isSearch:!0,objKey:"levels"}),(0,f.jsx)("span",{children:"Course Interested"}),":",(0,f.jsx)(p.Z,{groupClass:"mb-3 col-md-12 selectbox",groupId:"courseIntersted",value:e.course_interested,onChange:function(a){e.dispatchFunction({type:"course_interested",value:a})},name:"courseInterested",url:e.university_interested&&e.level_applying_for?"courseslists/?university=".concat(e.university_interested,"&course_levels=").concat(e.level_applying_for):"",isSearch:!0,objKey:"course_name"}),(0,f.jsx)("span",{children:"SOP"}),":",(0,f.jsx)(u.Z,{appId:e.appId,uploadId:"Sop",isEdit:!0,onChange:function(a){e.dispatchFunction({type:"sop",value:a})},groupId:"sopFile",groupClassName:"mb-3  dragDropUpload col-md-12",fieldName:"sopFileIp",minUploadSize:"0.005",maxUploadSize:"10",afile:e.sop}),(0,f.jsx)("span",{children:"Offer Letter"}),":",(0,f.jsx)(u.Z,{appId:e.appId,uploadId:"rcvd_offer_letter",isEdit:!0,onChange:function(a){e.dispatchFunction({type:"rcvd_offer_letter",value:a})},groupId:"rcvd_offer_letter",groupClassName:"mb-3  dragDropUpload col-md-12",fieldName:"rcvd_offer_letterIP",minUploadSize:"0.005",maxUploadSize:"10",afile:e.rcvd_offer_letter}),"superuser"===k.user_type?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{children:"Assigned Users"})," :",(0,f.jsx)(p.Z,{groupClass:"mb-3 selectbox ",groupId:"assignedUser",onChange:e.handleChange.bind(null,"assignedUser"),name:"assignedUser",url:"userlist/",value:e.assignedUser,isSearch:!0,objKey:"username"})]}):"","Agent"!==k.user_type?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{children:"Status"})," :",(0,f.jsx)(p.Z,{groupClass:"mb-3 selectbox ",groupId:"status",onChange:e.handleChange.bind(null,"status"),name:"status",url:"appstatus/",value:e.status,objKey:"App_status"})]}):"",(0,f.jsx)("span",{children:"Comments"})," : ",(0,f.jsx)("span",{children:null!==x&&void 0!==x&&x.notes?x.notes:""})]})},x={enqId:null,tenthMarksheet:null,twelvethMarksheet:null,diplomaMarksheet:null,bachelorMarksheet:null,masterMarksheet:null,lor:null,resume:null,languageExam:null,passport:null,assignedUser:null,status:null,sop:null,rcvd_offer_letter:null,university_interested:"",course_interested:"",intake_interested:"",level_applying_for:""},b=function(e,a){return null!==a&&void 0!==a&&a.all?{enqId:a.data.enqId,tenthMarksheet:a.data.tenthMarksheet,twelvethMarksheet:a.data.twelvethMarksheet,diplomaMarksheet:a.data.diplomaMarksheet,bachelorMarksheet:a.data.bachelorMarksheet,masterMarksheet:a.data.masterMarksheet,lor:a.data.lor,resume:a.data.resume,languageExam:a.data.languageExam,passport:a.data.passport,assignedUser:a.data.assignedUser,status:a.data.status,sop:a.data.Sop,rcvd_offer_letter:a.data.rcvd_offer_letter,university_interested:a.data.university_interested,course_interested:a.data.course_interested,intake_interested:a.data.intake_interested,level_applying_for:a.data.level_applying_for}:(0,l.Z)((0,l.Z)({},e),{},(0,i.Z)({},a.type,a.value))};var k=function(e){var a=(0,d.useState)([]),t=(0,r.Z)(a,2),i=t[0],k=t[1],I=(0,d.useReducer)(b,x),j=(0,r.Z)(I,2),M=j[0],Z=j[1],y=(0,d.useState)({isLoading:!1,isError:!1,isSubmitting:!1}),S=(0,r.Z)(y,2),N=S[0],U=S[1],C=(0,d.useState)(null),E=(0,r.Z)(C,2),w=E[0],F=E[1],q=(0,h.v9)((function(e){return e.authStore})),z=(0,v.s0)(),D=(0,h.I0)(),A=function(e,a){Z({type:e,value:a})};(0,d.useEffect)((function(){if(w)throw w}),[w]);var L=function(){var a=(0,n.Z)((0,s.Z)().mark((function a(){var t,n,r,i,d,o,u,p,h,m,v,g,f,_,x,b,I,j,M;return(0,s.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,c.IE)("get/courseinfo/?courseinfo_id=".concat(e.appId),{Authorization:"Bearer ".concat(q.accessToken)},"POST",null);case 2:if(null===(j=a.sent)||void 0===j||!j.isNetwork){a.next=6;break}return F((0,l.Z)((0,l.Z)({},j),{},{page:"appForm"})),a.abrupt("return");case 6:if(401!==(null===j||void 0===j?void 0:j.status)&&204!==(null===j||void 0===j?void 0:j.status)){a.next=9;break}return F((0,l.Z)((0,l.Z)({},j),{},{page:"appForm"})),a.abrupt("return");case 9:if(404!==(null===j||void 0===j?void 0:j.status)){a.next=12;break}return F((0,l.Z)((0,l.Z)({},j),{},{status:204,page:"appForm"})),a.abrupt("return");case 12:k(j.results[0]),M=j.results[0],console.log(M),Z({all:!0,data:{enqId:null===M||void 0===M||null===(t=M.student_info)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.id,tenthMarksheet:null===(r=M.student_info)||void 0===r?void 0:r.Tenth_Marksheet,twelvethMarksheet:null===(i=M.student_info)||void 0===i?void 0:i.Twelveth_Marksheet,diplomaMarksheet:null===(d=M.student_info)||void 0===d?void 0:d.Diploma_Marksheet,bachelorMarksheet:null===(o=M.student_info)||void 0===o?void 0:o.Bachelor_Marksheet,masterMarksheet:null===(u=M.student_info)||void 0===u?void 0:u.Master_Marksheet,passport:null===(p=M.student_info)||void 0===p?void 0:p.passport,lor:null===(h=M.student_info)||void 0===h?void 0:h.Lor,resume:null===(m=M.student_info)||void 0===m?void 0:m.Resume,languageExam:null===(v=M.student_info)||void 0===v?void 0:v.Language_Exam,assignedUser:null===M||void 0===M||null===(g=M.assigned_users)||void 0===g?void 0:g.id,status:null===M||void 0===M||null===(f=M.status)||void 0===f?void 0:f.id,sop:null===M||void 0===M?void 0:M.Sop,rcvd_offer_letter:null===M||void 0===M?void 0:M.rcvd_offer_letter,university_interested:null===M||void 0===M||null===(_=M.university_interested)||void 0===_?void 0:_.id,course_interested:null===M||void 0===M||null===(x=M.course_interested)||void 0===x?void 0:x.id,intake_interested:null===M||void 0===M||null===(b=M.intake_interested)||void 0===b?void 0:b.id,level_applying_for:null===M||void 0===M||null===(I=M.level_applying_for)||void 0===I?void 0:I.id}}),U((0,l.Z)((0,l.Z)({},N),{},{isLoading:!1,isError:!1,isSubmitting:!1}));case 17:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();(0,d.useEffect)((function(){if(e.edit){U((0,l.Z)((0,l.Z)({},N),{},{isLoading:!0,isError:!1,isSubmitting:!1}));try{L()}catch(a){return void F({e:a,page:"enquiries"})}}else e.enqID&&Z({type:"enqId",value:e.enqID})}),[e.appId]);var P=function(){var a=(0,n.Z)((0,s.Z)().mark((function a(){var t,n,r,d,o,u;return(0,s.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,M.enqId){a.next=4;break}return U((0,l.Z)((0,l.Z)({},N),{},{isError:"Please Select Student Name",isLoading:!1,isSubmitting:!1})),a.abrupt("return");case 4:if(t="Please upload ",n=!1,M.tenthMarksheet||(t+="10th Marksheet",n=!0),M.twelvethMarksheet||(t+=n?", ":"",t+="12th Marsksheet",n=!0),M.passport||(t+=n?", ":"",t+="passport",n=!0),M.sop||(t+=n?", ":"",t+="sop",n=!0),M.lor||(t+=n?", ":"",t+="lor",n=!0),M.resume||(t+=n?", ":"",t+="resume",n=!0),!(t.length>14)){a.next=14;break}return U((0,l.Z)((0,l.Z)({},N),{},{isError:t+" document.",isLoading:!1,isSubmitting:!1})),a.abrupt("return");case 14:return U((0,l.Z)((0,l.Z)({},N),{},{isLoading:!1,isError:!1,isSubmitting:!0})),(r=new FormData).append("name",M.enqId),M.tenthMarksheet instanceof File&&r.append("Tenth_Marksheet",M.tenthMarksheet),M.diplomaMarksheet instanceof File&&r.append("Diploma_Marksheet",M.diplomaMarksheet),M.twelvethMarksheet instanceof File&&r.append("Twelveth_Marksheet",M.twelvethMarksheet),M.bachelorMarksheet instanceof File&&r.append("Bachelor_Marksheet",M.bachelorMarksheet),M.masterMarksheet instanceof File&&r.append("Master_Marksheet",M.masterMarksheet),M.lor instanceof File&&r.append("Lor",M.lor),M.resume instanceof File&&r.append("Resume",M.resume),M.languageExam instanceof File&&r.append("Language_Exam",M.languageExam),M.passport instanceof File&&r.append("passport",M.passport),r.append("university_interested",M.university_interested),r.append("course_interested",M.course_interested),r.append("intake_interested",M.intake_interested),r.append("level_applying_for",M.level_applying_for),M.assignedUser&&r.append("assigned_users",M.assignedUser),M.status&&r.append("status",M.status),M.sop instanceof File&&r.append("Sop",M.sop),M.rcvd_offer_letter instanceof File&&r.append("rcvd_offer_letter",M.rcvd_offer_letter),e.edit?(d="create/app/courseinfo/".concat(null===i||void 0===i?void 0:i.application,"/?course_id=").concat(e.appId),o="PATCH"):(d="create/app/courseinfo/",o="POST"),a.next=37,(0,c.jQ)(d,{Authorization:"Bearer ".concat(q.accessToken)},o,r);case 37:if(null===(u=a.sent)||void 0===u||!u.isNetwork){a.next=41;break}return F((0,l.Z)((0,l.Z)({},u),{},{page:"enqForm"})),a.abrupt("return");case 41:if(401!==(null===u||void 0===u?void 0:u.status)&&204!==(null===u||void 0===u?void 0:u.status)){a.next=44;break}return F((0,l.Z)((0,l.Z)({},u),{},{page:"enqForm"})),a.abrupt("return");case 44:if(400!==(null===u||void 0===u?void 0:u.status)){a.next=47;break}return U((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isError:"Please check all form fields and try again",isSubmitting:!1})})),a.abrupt("return");case 47:U((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isError:!1,isSubmitting:!1})})),e.edit?D(g.a.setNotification({show:!0,heading:"Application",msg:"Application Id <strong>".concat(M.enqId,"</strong> edited successfully")})):D(g.a.setNotification({show:!0,heading:"Application",msg:"Application created successfully"})),z("/applications/"),a.next=56;break;case 52:return a.prev=52,a.t0=a.catch(0),F({e:a.t0,page:"enquiries"}),a.abrupt("return");case 56:case"end":return a.stop()}}),a,null,[[0,52]])})));return function(){return a.apply(this,arguments)}}();return N.isLoading?(0,f.jsx)(m.Z,{className:"loading-spinner"}):(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"row",children:(0,f.jsx)("div",{id:"tabsSimple",className:"layout-spacing col-md-12",children:(0,f.jsxs)("div",{className:"row",children:[(0,f.jsx)("div",{className:"col-md-6",children:(0,f.jsx)("div",{className:"neumorphism-box",children:(0,f.jsxs)("div",{className:"statbox box box-shadow",children:[(0,f.jsx)("div",{className:"widget-header",children:(0,f.jsx)("div",{className:"row",children:(0,f.jsx)("div",{className:"col-xl-12 col-md-12 col-sm-12 col-12",children:(0,f.jsx)("h4",{children:e.title})})})}),(0,f.jsx)("div",{className:"widget-content widget-content-area",children:(0,f.jsxs)("div",{className:"row",children:[(0,f.jsx)(p.Z,{disabled:e.edit,groupClass:"mb-3 selectbox",groupId:"enqId",label:"Name",value:M.enqId,onChange:A.bind(null,"enqId"),name:"enqId",url:e.edit?M.enqId?"view-enquiry/?id=".concat(M.enqId):"":"view-enquiry/",isSearch:!0,objKey:"student_name"}),(0,f.jsxs)("div",{className:"row ",children:[(0,f.jsx)(u.Z,{appId:e.appId,uploadId:"passport",isEdit:e.edit,onChange:A.bind(null,"passport"),groupId:"passport",groupClassName:"mb-3 dragDropUpload col-md-4",label:"Passport",fieldName:"passportIP",minUploadSize:"0.005",maxUploadSize:"10",afile:M.passport}),(0,f.jsx)(u.Z,{appId:e.appId,uploadId:"Tenth_Marksheet",isEdit:e.edit,onChange:A.bind(null,"tenthMarksheet"),groupId:"tenthMarksheet",groupClassName:"mb-3 col-md-4 dragDropUpload",label:"10th Marksheet",fieldName:"tenthMarksheetIp",minUploadSize:"0.005",maxUploadSize:"10",afile:M.tenthMarksheet}),(0,f.jsx)(u.Z,{appId:e.appId,uploadId:"Twelveth_Marksheet",isEdit:e.edit,onChange:A.bind(null,"twelvethMarksheet"),groupId:"twelthMarksheet",groupClassName:"mb-3  dragDropUpload col-md-4",label:"12th Marksheet",fieldName:"twelthMarksheetIp",minUploadSize:"0.005",maxUploadSize:"10",afile:M.twelvethMarksheet}),(0,f.jsx)(u.Z,{appId:e.appId,uploadId:"Resume",isEdit:e.edit,onChange:A.bind(null,"resume"),groupId:"resumeFile",groupClassName:"mb-3 dragDropUpload col-md-6",label:"Resume",fieldName:"resumeFileIp",minUploadSize:"0.005",maxUploadSize:"10",afile:M.resume}),(0,f.jsx)(u.Z,{appId:e.appId,uploadId:"Lor",isEdit:e.edit,onChange:A.bind(null,"lor"),groupId:"lorFile",groupClassName:"mb-3  dragDropUpload col-md-6",label:"Lor",fieldName:"lorFileIp",minUploadSize:"0.005",maxUploadSize:"10",afile:M.lor}),(0,f.jsx)("hr",{}),(0,f.jsx)(u.Z,{appId:e.appId,uploadId:"Diploma_Marksheet",isEdit:e.edit,onChange:A.bind(null,"diplomaMarksheet"),groupId:"diplomaMarksheet",groupClassName:"mb-3  dragDropUpload col-md-6",label:"Diploma Marksheet",fieldName:"diplomaMarksheetIp",minUploadSize:"0.005",maxUploadSize:"10",afile:M.diplomaMarksheet}),(0,f.jsx)(u.Z,{appId:e.appId,uploadId:"Bachelor_Marksheet",isEdit:e.edit,onChange:A.bind(null,"bachelorMarksheet"),groupId:"bachlorMarksheet",groupClassName:"mb-3  dragDropUpload col-md-6",label:"Bachelor Marksheet",fieldName:"bachlorMarksheetIp",minUploadSize:"0.005",maxUploadSize:"10",afile:M.bachelorMarksheet}),(0,f.jsx)(u.Z,{appId:e.appId,uploadId:"Master_Marksheet",isEdit:e.edit,onChange:A.bind(null,"masterMarksheet"),groupId:"masterMarksheet",groupClassName:"mb-3  dragDropUpload col-md-6",label:"Master Marksheet",fieldName:"masterMarksheetIp",minUploadSize:"0.005",maxUploadSize:"10",afile:M.masterMarksheet}),(0,f.jsx)(u.Z,{appId:e.appId,uploadId:"Language_Exam",isEdit:e.edit,onChange:A.bind(null,"languageExam"),groupId:"languageExam",groupClassName:"mb-3 dragDropUpload col-md-6",label:"Language Exam",fieldName:"languageExamIp",minUploadSize:"0.005",maxUploadSize:"10",afile:M.languageExam})]}),(0,f.jsxs)("div",{className:"col-md-12",children:[(0,f.jsx)(o.Z,{variant:"primary",type:"submit",onClick:P,disabled:N.isSubmitting,children:N.isSubmitting?"Submitting":"Submit"}),N.isError?(0,f.jsx)("p",{className:"dengor",children:N.isError}):""]})]})})]})})}),M.enqId?(0,f.jsx)("div",{className:"col-md-6",children:(0,f.jsx)("div",{className:"neumorphism-box",children:(0,f.jsx)(_,{country:M.enqId,enqId:M.enqId,sop:M.sop,rcvd_offer_letter:M.rcvd_offer_letter,university_interested:M.university_interested,course_interested:M.course_interested,intake_interested:M.intake_interested,level_applying_for:M.level_applying_for,dispatchFunction:Z,handleChange:A,assignedUser:M.assignedUser,status:M.status})})}):""]})})})})}}}]);
//# sourceMappingURL=21.7d766992.chunk.js.map