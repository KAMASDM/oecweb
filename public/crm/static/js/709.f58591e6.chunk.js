"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[709],{6056:function(e,n,t){var r=t(4165),i=t(1413),s=t(5861),a=t(9439),o=t(2791),l=t(9813),u=t(1386),c=t(629),d=t(182),h=t(9434),v=t(3247),m=t(184);n.Z=function(e){var n=(0,o.useState)(!1),t=(0,a.Z)(n,2),p=(t[0],t[1],(0,o.useState)(!1)),f=(0,a.Z)(p,2),g=f[0],x=f[1],_=(0,o.useState)({name:e.name,val:e.assignId?e.assignId:null}),w=(0,a.Z)(_,2),y=w[0],j=w[1],k=(0,o.useState)(null),b=(0,a.Z)(k,2),q=b[0],Z=b[1],C=(0,h.I0)();(0,o.useEffect)((function(){if(q)throw q}),[q]);var S=(0,h.v9)((function(e){return e.authStore})),N=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(t,s){var a,o;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x(!0),{assigned_users:t},(a=new FormData).append("assigned_users",t),n.next=6,(0,d.jQ)("get/courseinfo/".concat(e.courseId,"/"),{Authorization:"Bearer ".concat(S.accessToken)},"PATCH",a);case 6:if(null===(o=n.sent)||void 0===o||!o.isNetwork){n.next=11;break}return Z((0,i.Z)((0,i.Z)({},o),{},{page:"enqForm"})),C(v.a.setNotification({show:!0,heading:"Enquiry",msg:"Some Problem occur while updating the Assign User"})),n.abrupt("return");case 11:if(401!==(null===o||void 0===o?void 0:o.status)&&204!==(null===o||void 0===o?void 0:o.status)&&400!==(null===o||void 0===o?void 0:o.status)){n.next=15;break}return Z((0,i.Z)((0,i.Z)({},o),{},{page:"enqForm"})),C(v.a.setNotification({show:!0,heading:"Enquiry",msg:"For ".concat(e.enqName," assigned User changed successfully")})),n.abrupt("return");case 15:null===o||void 0===o||o.status,o.assigned_users===t&&(j({name:s.name,val:t}),console.log(),x(!1),C(v.a.setNotification({show:!0,heading:"Enquiry",msg:"For ".concat(e.enqName," assigned User changed successfully")})));case 17:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),E=(0,m.jsx)(l.Z,{id:"popoverAssignusrEnq",children:(0,m.jsx)(l.Z.Body,{children:(0,m.jsx)(c.Z,{placeholder:"select Option",options:e.allUser,value:y.val,onChange:N,name:"assignedUsr",search:!0})})});return(0,m.jsx)(m.Fragment,{children:g?"Updating":(0,m.jsx)(u.Z,{placement:"bottom",trigger:"click",overlay:E,rootClose:!0,children:(0,m.jsx)("span",{children:y.name})})})}},709:function(e,n,t){t.r(n),t.d(n,{default:function(){return q}});var r=t(4165),i=t(1413),s=t(5861),a=t(9439),o=t(2791),l=t(3513),u=t(9434),c=t(7689),d=t(1087),h=(t(9825),t(8982)),v=t(8156),m=t(182),p=t(3247),f=t(3360),g=t(9745),x=t(184),_=[{name:"Student Name",id:"name"},{name:"Student Phone",id:"phone"},{name:"Student Email",id:"email"},{name:"Current Education",id:"current_edu"},{name:"Country Interested",id:"country_interested"},{name:"Added By",id:"added_by"},{name:"Notes",id:"notes"},{name:"Date",id:"date"}];var w=function(e){var n=(0,o.useState)(!1),t=(0,a.Z)(n,2),r=t[0],i=t[1],s=(0,u.v9)((function(e){return e.enqColumn})),l=(0,u.I0)();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"col-lg-12 flex-main",children:[(0,x.jsx)("div",{children:e.enqFilter.university_interested||e.enqFilter.level_applying_for||e.enqFilter.intake_interested||e.enqFilter.enquiry_status?(0,x.jsx)("button",{className:"btn btn-outline-primary mb-2 me-4",onClick:e.filterOnClick,children:"Clear Filter"}):""}),(0,x.jsx)("div",{children:r?(0,x.jsxs)(f.Z,{variant:"outline-primary",onClick:function(){return i((function(e){return!e}))},children:["Hide Column \xa0",(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-eye-off",children:[(0,x.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,x.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]})]}):(0,x.jsxs)(f.Z,{variant:"outline-primary",onClick:function(){return i((function(e){return!e}))},style:{marginBottom:"20px"},children:["Show Column \xa0",(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[(0,x.jsx)("rect",{x:"0",y:"0",width:"24",height:"24",fill:"none",stroke:"none"}),(0,x.jsx)("path",{fill:"currentColor",d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5s5 2.24 5 5s-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3s3-1.34 3-3s-1.34-3-3-3z"})]})]})})]}),r?(0,x.jsx)("div",{className:"col-lg-12 flex-col-btns",children:_.map((function(e){return(0,x.jsx)(f.Z,{variant:s[e.id]?"outline-dark":"dark",onClick:function(){return l(g.G.setEnqColumnStatus({key:e.id}))},children:e.name})}))}):""]})},y=(t(759),t(9795)),j=t(3161);var k=function(e){var n,t,r;return(0,x.jsx)("div",{className:"row nomp",children:(0,x.jsxs)(y.Z,{onSubmit:e.searchEnq,className:"col-md-12",children:[(0,x.jsx)(y.Z.Label,{className:"text-center itsBlock",children:"Search Enquiry"}),(0,x.jsxs)(j.Z,{className:"mb-3",children:[(0,x.jsx)(y.Z.Control,{placeholder:"Search Name / Email / Phone Number","aria-label":"Recipient's username","aria-describedby":"basic-addon2",type:"text",name:"search",value:e.searchText,onChange:function(n){var t;e.setSearchText(n.target.value),null!==(t=n.target.value)&&void 0!==t&&t.length||e.refreshNeeded(!0)},className:"searchInput ".concat(null!==(n=e.searchText)&&void 0!==n&&n.length?"nocontent":"")}),null!==(t=e.searchText)&&void 0!==t&&t.length?(0,x.jsx)(j.Z.Text,{onClick:e.clearSearch,className:"clear-search__btn",children:(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,x.jsx)("path",{fill:"currentColor",d:"m12 13.4l-4.9 4.9q-.275.275-.7.275q-.425 0-.7-.275q-.275-.275-.275-.7q0-.425.275-.7l4.9-4.9l-4.9-4.9q-.275-.275-.275-.7q0-.425.275-.7q.275-.275.7-.275q.425 0 .7.275l4.9 4.9l4.9-4.9q.275-.275.7-.275q.425 0 .7.275q.275.275.275.7q0 .425-.275.7L13.4 12l4.9 4.9q.275.275.275.7q0 .425-.275.7q-.275.275-.7.275q-.425 0-.7-.275Z"})})}):"",(0,x.jsx)(f.Z,{type:"submit",variant:"outline-primary",id:"button-addon2",className:"searchBtnEnq",disabled:null===(r=e.searchText)||void 0===r||!r.length,children:"Search"})]})]})})},b=t(2054);t(6056);var q=function(){var e=(0,o.useState)([]),n=(0,a.Z)(e,2),t=n[0],f=n[1],g=(0,o.useState)(!0),_=(0,a.Z)(g,2),y=_[0],j=(_[1],(0,o.useState)(!0)),q=(0,a.Z)(j,2),Z=q[0],C=q[1],S=(0,o.useState)([]),N=(0,a.Z)(S,2),E=N[0],B=N[1],F=(0,o.useState)({university_interested:null,level_applying_for:null,intake_interested:null,enquiry_status:null,assigned_usr:null}),T=(0,a.Z)(F,2),A=T[0],I=T[1],z=(0,o.useState)(1),D=(0,a.Z)(z,2),L=D[0],M=D[1],P=(0,o.useState)(10),R=(0,a.Z)(P,2),H=R[0],U=R[1],O=(0,o.useState)(0),V=(0,a.Z)(O,2),G=V[0],J=V[1],Q=((0,o.useRef)(0),(0,o.useState)({show:!1,enqId:null,name:null})),K=(0,a.Z)(Q,2),W=K[0],X=K[1],Y=(0,o.useRef)({}),$=(0,o.useState)(""),ee=(0,a.Z)($,2),ne=ee[0],te=ee[1],re=(0,o.useState)(!1),ie=(0,a.Z)(re,2),se=ie[0],ae=ie[1],oe=(0,o.useState)(!1),le=(0,a.Z)(oe,2),ue=le[0],ce=le[1],de=(0,u.v9)((function(e){return e.authStore})),he=(0,c.s0)(),ve=(0,o.useState)(null),me=(0,a.Z)(ve,2),pe=me[0],fe=me[1],ge=(0,u.v9)((function(e){return e.enqColumn})),xe=(0,u.I0)(),_e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,te(""),ae(!0),e.next=5,(0,m.zG)("update-enquiry/".concat(n,"/"),{Authorization:"Bearer ".concat(de.accessToken)},"DELETE");case 5:if(!0===(t=e.sent)){e.next=9;break}return fe((0,i.Z)((0,i.Z)({},t),{},{page:"enquiries"})),e.abrupt("return");case 9:xe(p.a.setNotification({show:!0,heading:"Enquiry Deleted Successfully",msg:"<strong>".concat(Y.current.name,"</strong> enquiry Deleted successfully")})),Y.current={},f([]),C(!0),M(1),e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(0),fe({e:e.t0,page:"enquiries"}),e.abrupt("return");case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(n){return e.apply(this,arguments)}}(),we=[{cell:function(e){return(0,x.jsxs)(x.Fragment,{children:[null!==e&&void 0!==e&&e.application_id?(0,x.jsx)(d.rU,{to:"/student/".concat(e.id),alt:"Go To Dashboard",children:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-home",children:[(0,x.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,x.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]})}):(0,x.jsx)(d.rU,{to:"/application/create/".concat(e.id),alt:"Create Application",children:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-file",children:[(0,x.jsx)("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),(0,x.jsx)("polyline",{points:"13 2 13 9 20 9"})]})}),(0,x.jsx)("button",{className:"enquiryAction",title:"Edit Enquiry",onClick:function(){he("/enquiry/edit/".concat(e.id))},children:(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-edit-2 p-1 br-8 mb-1",children:(0,x.jsx)("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})})}),(0,x.jsx)("button",{className:"enquiryAction",title:"Delete Enquiry",onClick:function(){var n,t;n=e.student_name,t=e.id,ce(!0),Y.current={name:n,id:t}},children:(0,x.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-trash p-1 br-8 mb-1",children:[(0,x.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,x.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})},ignoreRowClick:!0,allowOverflow:!0,button:!0},{name:"Student Name",selector:function(e){return e.student_name},sortable:!0,omit:ge.name},{name:"Student Phone",selector:function(e){return e.student_phone},omit:ge.phone},{name:"Student Email",selector:function(e){return e.student_email},grow:1,omit:ge.email},{name:"Current Education",selector:function(e){return e.current_education},omit:ge.current_edu},{name:"Country Interested",selector:function(e){return e.country_interested},omit:ge.country_interested},{name:"Enq Date",selector:function(e){return e.date_created},omit:ge.date},{name:"Added By",selector:function(e){return e.added_by},omit:ge.added_by},{name:"Notes",selector:function(e){return e.notes},omit:ge.notes}];(0,o.useEffect)((function(){if(pe)throw pe}),[pe]);var ye=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.IE)("userlist/",{Authorization:"Bearer ".concat(de.accessToken)});case 2:if(null===(n=e.sent)||void 0===n||!n.isNetwork){e.next=6;break}return fe((0,i.Z)((0,i.Z)({},n),{},{page:"enquiries"})),e.abrupt("return");case 6:if(401!==(null===n||void 0===n?void 0:n.status)){e.next=9;break}return fe((0,i.Z)((0,i.Z)({},n),{},{page:"enquiries"})),e.abrupt("return");case 9:if(null!==n&&void 0!==n&&n.length){e.next=12;break}return fe((0,i.Z)((0,i.Z)({},n),{},{page:"enquiries"})),e.abrupt("return");case 12:B((function(e){return n.map((function(e){return{value:e.id,name:e.username}}))}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){t.length&&!E.length&&ye()}),[t]);var je=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var t,s,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae(!0),e.next=3,(0,m.IE)(n,{Authorization:"Bearer ".concat(de.accessToken)},"GET",null);case 3:if(null===(s=e.sent)||void 0===s||!s.isNetwork){e.next=7;break}return fe((0,i.Z)((0,i.Z)({},s),{},{page:"enquiries"})),e.abrupt("return");case 7:if(401!==(null===s||void 0===s?void 0:s.status)){e.next=10;break}return fe((0,i.Z)((0,i.Z)({},s),{},{page:"enquiries"})),e.abrupt("return");case 10:(null===s||void 0===s||null===(t=s.results)||void 0===t?void 0:t.length)>0?(null!==(a=s.results.map((function(e){var n,t,r,s,a,o,l,u,c,d,h,v,m,p;return(0,i.Z)((0,i.Z)({},e),{},{date_created:null===e||void 0===e?void 0:e.date_created.split("-").reverse().join("-"),added_by:null===e||void 0===e||null===(n=e.added_by)||void 0===n?void 0:n.username,intake_interested:null!==e&&void 0!==e&&null!==(t=e.intake_interested)&&void 0!==t&&t.intake_month?"".concat(null===e||void 0===e||null===(r=e.intake_interested)||void 0===r?void 0:r.intake_month," ").concat(null===e||void 0===e||null===(s=e.intake_interested)||void 0===s?void 0:s.intake_year):"",assigned_users:null!==e&&void 0!==e&&null!==(a=e.assigned_users)&&void 0!==a&&a.username?null===e||void 0===e||null===(o=e.assigned_users)||void 0===o?void 0:o.username:"-",assigned_usersId:null===e||void 0===e||null===(l=e.assigned_users)||void 0===l?void 0:l.id,country_interested:null===e||void 0===e||null===(u=e.country_interested)||void 0===u?void 0:u.country_name,course_interested:null===e||void 0===e||null===(c=e.course_interested)||void 0===c?void 0:c.course_name,current_education:null===e||void 0===e||null===(d=e.current_education)||void 0===d?void 0:d.current_education,current_educationId:null===e||void 0===e||null===(h=e.current_education)||void 0===h?void 0:h.id,enquiry_status:null===e||void 0===e||null===(v=e.enquiry_status)||void 0===v?void 0:v.status,level_applying_for:null===e||void 0===e||null===(m=e.level_applying_for)||void 0===m?void 0:m.levels,university_interested:null===e||void 0===e||null===(p=e.university_interested)||void 0===p?void 0:p.univ_name})})))&&void 0!==a&&a.length&&f(a),J(s.count)):f([]),ae(!1),C(!1);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){if(Z){var e="enquiries/?ordering=-date_created&p=".concat(L,"&records=").concat(H);e+=A.university_interested?"&university_interested=".concat(A.university_interested):"",e+=A.level_applying_for?"&level_applying_for=".concat(A.level_applying_for):"",e+=A.intake_interested?"&intake_interested=".concat(A.intake_interested):"",e+=A.enquiry_status?"&enquiry_status=".concat(A.enquiry_status):"",e+=A.assigned_usr?"&assigned_users=".concat(A.assigned_usr):"",e+="superuser"===de.user_type?y?"":"&assigned_usersf=1":"";try{je(e)}catch(n){return void fe({e:n,page:"enquiries"})}C(!1)}}),[A,Z,y,L,H]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"row layout-spacing",children:[(0,x.jsx)("div",{className:"neumorphism-box nmb",children:(0,x.jsx)("div",{className:"col-lg-12",children:(0,x.jsx)("div",{className:"row",children:(0,x.jsx)(k,{isAdmin:"superuserr"===de.user_type,filterSelectionChanged:function(e,n){I((function(t){var r=JSON.parse(JSON.stringify(t));return r[e]=n,r})),C(!0),M(1)},enqFilter:A,searchText:ne,setSearchText:te,clearSearch:function(){null!==ne&&void 0!==ne&&ne.length&&(f([]),C(!0),M(1)),te("")},searchEnq:function(e){try{if(e.preventDefault(),null!==ne&&void 0!==ne&&ne.length){var n="superuser"===de.user_type?y?"":"&assigned_usersf=1":"";ae(!0),M(1);var t="enquiries/?ordering=-date_created&search=".concat(ne).concat(n);je(t)}}catch(e){return void fe({e:e,page:"enquiries"})}},refreshNeeded:C})})})}),(0,x.jsx)("div",{className:"neumorphism-box",children:(0,x.jsx)("div",{className:"col-lg-12",children:(0,x.jsx)("div",{className:"statbox widget box box-shadow",children:(0,x.jsxs)("div",{className:"widget-content widget-content-area",children:[(0,x.jsx)(w,{showFilterBtn:!1,filterStore:"enqColumn",enqFilter:A,filterOnClick:function(){I({university_interested:null,level_applying_for:null,intake_interested:null,enquiry_status:null,assigned_usr:null}),f([]),M(1),C(!0)}}),(0,x.jsx)(l.ZP,{autoResetPage:!0,onChangePage:function(e){M(e),f([]),C(!0)},columns:we,data:t,onChangeRowsPerPage:function(e,n){U(e),M(n),f([]),C(!0)},selectableRows:!0,onSelectedRowsChange:function(e){e.selectedRows},pagination:!0,paginationServer:!0,progressPending:se,progressComponent:(0,x.jsx)(h.Z,{className:"loading-spinner-flex"}),paginationTotalRows:G},G)]})})})})]}),ue?(0,x.jsx)(v.Z,{setModalStatus:function(){ce(!1)},showStatus:ue,showHeader:!1,body:(0,x.jsxs)("div",{className:"delete-modal text-center",children:[(0,x.jsx)("div",{className:"delete-modal__icon",children:(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 24 24",children:(0,x.jsx)("path",{fill:"#f15e5e",d:"M8.27 3L3 8.27v7.46L8.27 21h7.46C17.5 19.24 21 15.73 21 15.73V8.27L15.73 3M9.1 5h5.8L19 9.1v5.8L14.9 19H9.1L5 14.9V9.1m6 5.9h2v2h-2v-2m0-8h2v6h-2V7"})})}),(0,x.jsxs)("div",{className:"delete-modal__text",children:[(0,x.jsx)("h3",{children:"Are you sure?"}),(0,x.jsxs)("p",{children:["Do you really want to delete",(0,x.jsxs)("strong",{children:[" ",Y.current.name," ?"]})]})]}),(0,x.jsxs)("div",{className:"delete-modal__action",children:[(0,x.jsx)("button",{class:"btn btn-light-dark mb-2 me-4",onClick:function(){ce(!1)},children:"Cancel"}),(0,x.jsx)("button",{class:"btn btn-danger mb-2 me-4",onClick:function(){_e(Y.current.id),ce(!1)},children:"Delete"})]})]}),showFooter:!1,footerContent:""}):"",W.show?(0,x.jsx)(b.Z,{id:W.enqId,title:W.name,onHide:function(){X({show:!1,enqId:null,name:null})}}):""]})}}}]);
//# sourceMappingURL=709.f58591e6.chunk.js.map