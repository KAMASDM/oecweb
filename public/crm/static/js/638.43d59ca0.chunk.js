"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[638],{5309:function(e,n,t){t(2791),t(184)},5638:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var r=t(4165),a=t(1413),s=t(5861),o=t(9439),i=t(2791),u=t(9795),c=(t(9825),t(5309),t(182)),l=t(9434),d=t(3513),v=t(8982),m=t(7689),p=t(629),f=t(184);var h=function(e){var n=e.courseData,t=e.uniId,r=e.levelId,a=e.selectionName,s=(0,i.useState)(),u=(0,o.Z)(s,2),c=u[0],l=u[1],d=(0,m.s0)();(0,i.useEffect)((function(){var e;if(null!==(e=n.intake)&&void 0!==e&&e.length){var t=new Date,r=t.getFullYear(),s=n.intake.map((function(e){var n={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},a=e.intake_month.split("-");if(r===e.intake_year){if(t.getMonth()+1<=n[a[1].toLowerCase()]&&r===e.intake_year)return{value:e.id,name:e.intake_month+" "+e.intake_year};if(t.getMonth()+1<=n[a[1].toLowerCase()]&&r!==e.intake_year)return{value:e.id,name:e.intake_month+" "+e.intake_year}}else if(r<e.intake_year)return{value:e.id,name:e.intake_month+" "+e.intake_year}})),o=(0,f.jsx)("div",{className:"courseCardSelect",children:(0,f.jsx)(p.Z,{placeholder:"Select Intake",options:s,value:"",onChange:v,name:a})});l(o)}else{l((0,f.jsx)("p",{className:"dengor",children:"No intake found for this course"}))}}),[n.intake]);var v=function(e){d("/enquiry/create",{state:{uniId:t,courseId:n.id,levelId:r,intake:e}})};return(0,f.jsx)("div",{className:"col-md-4 text-center mb-3",children:(0,f.jsxs)("div",{className:"card courseCard",children:[n.img?(0,f.jsx)("img",{src:n.img,className:"card-img-top",alt:n.course_name}):"",(0,f.jsxs)("div",{className:"card-body",children:[(0,f.jsx)("h5",{className:"card-title mb-3",children:n.course_name}),c]})]})})};var g=function(e){var n,t=(0,i.useState)(),d=(0,o.Z)(t,2),m=d[0],p=d[1],g=(0,i.useState)({totalCourse:null,img:null,courses:[]}),x=(0,o.Z)(g,2),Z=x[0],k=x[1],j=(0,i.useState)(!1),b=(0,o.Z)(j,2),y=b[0],C=b[1],N=(0,i.useState)(null),S=(0,o.Z)(N,2),I=S[0],_=S[1],w=(0,l.v9)((function(e){return e.authStore}));(0,i.useEffect)((function(){if(I)throw I}),[I]);var P=function(){var n=(0,s.Z)((0,r.Z)().mark((function n(){var t,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("i am inside"),C(!0),t="uni-retrieve/".concat(e.uniId,"/?level=").concat(e.courseLevel),null!==m&&void 0!==m&&m.length&&(t+="&course_name=".concat(m)),n.next=6,(0,c.IE)("".concat(t),{Authorization:"Bearer ".concat(w.accessToken)},"POST",null);case 6:if(s=n.sent,console.log(s),null===s||void 0===s||!s.isNetwork){n.next=11;break}return _((0,a.Z)((0,a.Z)({},s),{},{page:"enquiries"})),n.abrupt("return");case 11:if(null===s||void 0===s||!s.status||401!==(null===s||void 0===s?void 0:s.status)){n.next=14;break}return _((0,a.Z)((0,a.Z)({},s),{},{page:"enquiries"})),n.abrupt("return");case 14:if(null===s||void 0===s||!s.status){n.next=17;break}return _((0,a.Z)((0,a.Z)({},s),{},{page:"enquiries"})),n.abrupt("return");case 17:k({totalCourse:null===s||void 0===s?void 0:s.university_count,img:null===s||void 0===s?void 0:s.univ_logo,courses:null===s||void 0===s?void 0:s.courses}),C(!1);case 19:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,i.useEffect)((function(){P()}),[m]),console.log(Z),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"row",children:[(0,f.jsx)(u.Z.Group,{className:"mb-3 col-md-4",controlId:"courseSearch",children:(0,f.jsx)(u.Z.Control,{type:"text",name:"courseSearch",placeholder:"Search Courses",value:m,onChange:function(e){return p(e.target.value)}})}),(0,f.jsx)("div",{className:"col-md-8 text-right",children:(0,f.jsx)("button",{className:"btn btn-primary",onClick:e.goToCourse,children:"Go to University List"})})]}),(0,f.jsx)("div",{className:"row",children:y?(0,f.jsx)("div",{className:"col-md-12 text-center",children:(0,f.jsx)(v.Z,{})}):null!==(n=Z.courses)&&void 0!==n&&n.length?Z.courses.map((function(n){return(0,f.jsx)(h,{courseData:n,uniId:e.uniId,levelId:e.courseLevel,selectionName:n.id},n.id)})):(0,f.jsx)("h2",{className:"text-center",children:"No Courses Found"})})]})};var x=function(){var e=(0,i.useState)(null),n=(0,o.Z)(e,2),t=n[0],p=n[1],h=(0,i.useState)([]),x=(0,o.Z)(h,2),Z=x[0],k=x[1],j=(0,i.useState)(""),b=(0,o.Z)(j,2),y=b[0],C=b[1],N=(0,i.useState)(!1),S=(0,o.Z)(N,2),I=S[0],_=S[1],w=(0,i.useState)(1),P=(0,o.Z)(w,2),q=P[0],E=P[1],F=(0,i.useState)(10),T=(0,o.Z)(F,2),L=T[0],A=T[1],G=(0,i.useState)(0),M=(0,o.Z)(G,2),U=M[0],D=M[1],R=(0,i.useState)({loadCourse:!1,uniId:-1}),z=(0,o.Z)(R,2),B=z[0],O=z[1];(0,m.s0)(),(0,i.useEffect)((function(){if(t)throw t}),[t]);var Y=(0,l.v9)((function(e){return e.authStore})),H=((0,i.useRef)(),function(e,n){O({loadCourse:!0,uniId:e,type:n}),console.log("time to load courses")}),J=[{name:"University Name",selector:function(e){return e.univ_name},sortable:!0},{name:"Action",selector:function(e){return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"btn-primary btn mb-3 noMPC",onClick:function(){H(e.id,2)},children:"Apply For UG Course"}),(0,f.jsx)("span",{className:"btn-primary btn mb-3 ml30 noMmob",onClick:function(){H(e.id,1)},children:"Apply For PG Course"})]})}}],K=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,t,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),t="get/unilistapply/?p=".concat(q,"&records=").concat(L),null!==y&&void 0!==y&&y.length&&(t+="&search=".concat(y)),e.next=5,(0,c.IE)("".concat(t),{Authorization:"Bearer ".concat(Y.accessToken)},"POST",null);case 5:if(s=e.sent,console.log(s),null===s||void 0===s||!s.isNetwork){e.next=10;break}return p((0,a.Z)((0,a.Z)({},s),{},{page:"enquiries"})),e.abrupt("return");case 10:if(401!==(null===s||void 0===s?void 0:s.status)){e.next=13;break}return p((0,a.Z)((0,a.Z)({},s),{},{page:"enquiries"})),e.abrupt("return");case 13:if(null===s||void 0===s||!s.status){e.next=16;break}return p((0,a.Z)((0,a.Z)({},s),{},{page:"enquiries"})),e.abrupt("return");case 16:(null===s||void 0===s||null===(n=s.results)||void 0===n?void 0:n.length)>0?(D(s.count),k(null===s||void 0===s?void 0:s.results)):(D(0),k([])),_(!1);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){try{K()}catch(e){return void p({e:e,page:"enquiries"})}}),[L,q,y]),(0,f.jsx)("div",{className:"row layout-spacing",children:(0,f.jsx)("div",{className:"neumorphism-box nmb",children:(0,f.jsx)("div",{className:"col-lg-12",children:B.loadCourse?(0,f.jsx)(g,{uniId:B.uniId,courseLevel:B.type,goToCourse:function(){O({loadCourse:!1,uniId:-1,type:-1})}}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u.Z.Group,{className:"mb-3 col-md-4",controlId:"uniSearch",children:(0,f.jsx)(u.Z.Control,{type:"text",name:"uniSearch",placeholder:"Search University",value:y,onChange:function(e){return C(e.target.value)}})}),(0,f.jsx)(d.ZP,{onChangePage:function(e){E(e),k([])},columns:J,data:Z,onChangeRowsPerPage:function(e,n){A(e),E(n),k([])},pagination:!0,paginationServer:!0,progressPending:I,progressComponent:(0,f.jsx)(v.Z,{className:"loading-spinner-flex"}),paginationTotalRows:U})]})})})})}}}]);
//# sourceMappingURL=638.43d59ca0.chunk.js.map